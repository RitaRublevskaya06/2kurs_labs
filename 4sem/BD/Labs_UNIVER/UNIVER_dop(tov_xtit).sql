USE UNIVER;

-- Дополнение таблицы PROFESSION 
INSERT INTO PROFESSION (FACULTY, PROFESSION, PROFESSION_NAME, QUALIFICATION)
VALUES 
    ('TOV', '1-48 01 07', 'Химическая технология природных энергоносителей', 'Инженер-химик'),
    ('TOV', '1-48 01 08', 'Технология лекарственных препаратов', 'Инженер-технолог'),
    ('HTT', '1-36 02 01', 'Машины и аппараты химических производств', 'Инженер-механик'),
    ('HTT', '1-36 03 01', 'Технология электрохимических производств', 'Инженер-химик');


-- Дополнение таблицы GROUPS
INSERT INTO GROUPS (FACULTY, PROFESSION, YEAR_FIRST)
VALUES 
    ('TOV', '1-48 01 07', 2020),
    ('TOV', '1-48 01 08', 2021),
    ('HTT', '1-36 02 01', 2020),
    ('HTT', '1-36 03 01', 2021);


-- Дополнение таблицы STUDENT
INSERT INTO STUDENT (IDGROUP, NAME, BDAY)
VALUES 
    -- Студенты ТОВ (группа 1-48 01 07)
    (33, 'Иванов Петр Сергеевич', '2000-05-15'),
    (33, 'Смирнова Анна Владимировна', '2000-08-22'),
    (33, 'Кузнецов Дмитрий Игоревич', '2000-03-10'),
    
    -- Студенты ТОВ (группа 1-48 01 08)
    (34, 'Петрова Елена Александровна', '2001-07-18'),
    (34, 'Сидоров Михаил Олегович', '2001-11-05'),
    
    -- Студенты ХТиТ (группа 1-36 02 01)
    (35, 'Николаев Артем Викторович', '2000-04-25'),
    (35, 'Федорова Ольга Дмитриевна', '2000-09-12'),
    (35, 'Морозов Иван Сергеевич', '2000-02-28'),
    
    -- Студенты ХТиТ (группа 1-36 03 01)
    (36, 'Волкова Татьяна Петровна', '2001-06-30'),
    (36, 'Алексеев Андрей Николаевич', '2001-12-15');

-- Дополнение таблицы SUBJECT
INSERT INTO SUBJECT (SUBJECT, SUBJECT_NAME, PULPIT)
VALUES 
    ('HIM', 'Общая химия', 'OH'),
    ('ANORG', 'Неорганическая химия', 'TNVOHT'),
    ('FIZHIM', 'Физическая химия', 'HPD'),
    ('ORG', 'Органическая химия', 'OH');

-- Дополнение таблицы PROGRESS
INSERT INTO PROGRESS (SUBJECT, IDSTUDENT, PDATE, NOTE)
VALUES 
    -- Оценки студентов ТОВ
    ('HIM', 1070, '2021-12-15', 8),
    ('HIM', 1071, '2021-12-15', 7),
    ('HIM', 1072, '2021-12-15', 9),
    ('ORG', 1073, '2022-05-20', 6),
    ('ORG', 1074, '2022-05-20', 8),
    
    -- Оценки студентов ХТиТ
    ('HIM', 1075, '2021-12-15', 7),
    ('HIM', 1076, '2021-12-15', 8),
    ('HIM', 1077, '2021-12-15', 9),
    ('ANORG', 1078, '2022-05-20', 7),
    ('ANORG', 1079, '2022-05-20', 8),
    
    -- Добавим одинаковые предметы для обоих факультетов
    ('FIZHIM', 1070, '2022-06-10', 8),
    ('FIZHIM', 1075, '2022-06-10', 7),
    ('FIZHIM', 1071, '2022-06-10', 9),
    ('FIZHIM', 1076, '2022-06-10', 8);


	-- Пример добавления оценок для студентов HTT
INSERT INTO PROGRESS (SUBJECT, IDSTUDENT, PDATE, NOTE)
VALUES 
    ('HIM', 1046, '2024-12-15', 7),
    ('HIM', 1047, '2024-12-15', 8),
    ('FIZHIM', 1046, '2025-01-10', 9),
    ('FIZHIM', 1047, '2025-01-10', 6),
    ('ANORG', 1048, '2025-01-20', 7),
    ('ORG', 1049, '2025-01-25', 8);



------ Дополнение таблицы SUBJECT дисциплинами ИСИТ
INSERT INTO SUBJECT (SUBJECT, SUBJECT_NAME, PULPIT)
VALUES 
    ('WEB', 'Web-разработка', 'ISIT'),
    ('DS', 'Наука о данных', 'ISIT'),
    ('AI', 'Искусственный интеллект', 'ISIT'),
    ('CYB', 'Кибербезопасность', 'ISIT'),
    ('CLOUD', 'Облачные технологии', 'ISIT');

------ Дополнение таблицы GROUPS новыми группами ИСИТ
INSERT INTO GROUPS (FACULTY, PROFESSION, YEAR_FIRST)
VALUES 
    ('IT', '1-40 01 02', 2023),
    ('IT', '1-40 01 02', 2022);

------ Дополнение таблицы STUDENT студентами ИСИТ
INSERT INTO STUDENT (IDGROUP, NAME, BDAY)
VALUES 
    (37, 'Ковалев Алексей Дмитриевич', '2003-05-19'),
    (37, 'Смирнова Анастасия Игоревна', '2003-09-27'),
    (37, 'Петров Артём Сергеевич', '2003-02-14'),
    (38, 'Иванова София Владимировна', '2004-07-08'),
    (38, 'Новиков Максим Андреевич', '2004-11-30');

------ Добавление оценок для новых студентов ИСИТ
INSERT INTO PROGRESS (SUBJECT, IDSTUDENT, PDATE, NOTE)
VALUES 
    ('WEB', 1080, '2023-12-10', 9),
    ('WEB', 1081, '2023-12-10', 8),
    ('DS', 1082, '2023-12-15', 7),
    ('AI', 1083, '2024-01-12', 9),
    ('CLOUD', 1084, '2024-01-15', 8);



---- Удаление добавленные данные в таблицы для факультетов ТОВ и ХТиТ
--DELETE FROM PROGRESS 
--WHERE IDSTUDENT IN (
--    SELECT IDSTUDENT FROM STUDENT WHERE IDGROUP IN (
--        SELECT IDGROUP FROM GROUPS WHERE FACULTY IN ('TOV', 'HTT') 
--        AND PROFESSION IN ('1-48 01 07', '1-48 01 08', '1-36 02 01', '1-36 03 01')
--    )
--);

---- Или альтернативно по дате добавления (если другие оценки не добавлялись)
--DELETE FROM PROGRESS WHERE PDATE > '2023-01-01';

--DELETE FROM STUDENT 
--WHERE IDGROUP IN (
--    SELECT IDGROUP FROM GROUPS WHERE FACULTY IN ('TOV', 'HTT') 
--    AND PROFESSION IN ('1-48 01 07', '1-48 01 08', '1-36 02 01', '1-36 03 01')
--);

--DELETE FROM GROUPS 
--WHERE FACULTY IN ('TOV', 'HTT') 
--AND PROFESSION IN ('1-48 01 07', '1-48 01 08', '1-36 02 01', '1-36 03 01');

--DELETE FROM PROFESSION 
--WHERE FACULTY IN ('TOV', 'HTT') 
--AND PROFESSION IN ('1-48 01 07', '1-48 01 08', '1-36 02 01', '1-36 03 01');


--DELETE FROM SUBJECT 
--WHERE SUBJECT IN ('HIM', 'ANORG', 'FIZHIM', 'ORG');


---- Проверим, что данные удалены
--SELECT * FROM PROFESSION WHERE PROFESSION IN ('1-48 01 07', '1-48 01 08', '1-36 02 01', '1-36 03 01');
--SELECT * FROM GROUPS WHERE PROFESSION IN ('1-48 01 07', '1-48 01 08', '1-36 02 01', '1-36 03 01');
--SELECT * FROM STUDENT WHERE IDGROUP > 32; -- ID групп, которые мы добавляли
--SELECT * FROM PROGRESS WHERE SUBJECT IN ('HIM', 'ANORG', 'FIZHIM', 'ORG');